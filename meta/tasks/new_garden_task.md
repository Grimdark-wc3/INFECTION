# Задача по созданию локации Парк
Нужно расписать какие работы должны быть выполнены, чтобы реализовать новый **Парк**.

## Общие требования к новой локации

* Структура локации должна быть выполнена по типу арены:
   * Замкнутое пространство;
   * Много свободного места, есть разные возможности убегать от врагов, водить их по кругу;   
   * Спавны в случайных местах: Несколько зон для атаки, в которые игрок попасть не может. Спавн в случайной области;

## todo

* {-} Изменения структуры локации:
   * {+} Расширить парковую зону на запад в сторону метро:
      * {+} удалить солдат из лагеря беженцев в БЗ, чтобы они не переагривали на себя заражённых;
   * {+} Лабиринты из деревьев по которым можно водить заражённых;
   * {-} Переделать атмосферу:
      * {+} Расставить палатки медиков;
      * {+} Расставить стулья и столы;
   * {-} Окровавленные дневники;
   * {-} Трупы медиков и регуляторов;
   * {-} Тексты и субтитры о кордоне и фильтрационном лагере;

### Псевдоквест "Зачистка"
   
#### Группа выживших на крышах:

* {+} Новый состав: спецназовец, ГО, регулятор (со щитом):
   * {+} Создаются триггером: должны быть их переменные;
* {+} Заражённых нападающих на лагерь выживших на крыше заносить в группу;
* {+} Новый диалог если отряд выживших выживает и убита вся группа нападающих на крышу:
   * Выживший: А вы ребята не промах! Вместе мы пробъёмся в безопасную зону!;
   * Крис: В безопасную зону?;
   * ГО: Её организовали регуляторы на рыночной площади. Дороги туда перекрыли. Единственный путь через парк.;
   * Регулятор: Но там поставили кордон и фильтрационный лагерь.;
   * Крис: Что за лагерь?;
   * Спецназовец: Медики допускают в безопасную зону только имунных. Остальных сажают в карантин.
   * ГО: Из лагеря доносились жуткие вопли и мы не рискнули туда идти. Но с вами можно рискнуть!;

#### Новые события в Парке

**Событие Зачистка парка**:

* {+} Группа подходит к восточным воротам в парк. Диалог с Командиром БЗ:
   * Джонни: Вот дерьмо! Ворота закрыты.;
   * Крис: Кажется, приём к докторам окончен. Безопасная зона переполнена?;
   * Джонни: Или переполнен карантин.;
   * Командир: Что я слышу? Неужели живые?;
   * Командир: Если хотите попасть в безопасную зону, через парк придётся попотеть, ребята.;
   * Командир: Кордон прорвали. Карантин был спорной идеей... Теперь в парке толпа этих тварей, поэтому я закрыл ворота.;
   * Командир: Но для вас я их открою. Готовьтесь к тёплой встрече!;      
* {+} Спавн происходит в зависимости от числа игроков в группе, достаточно большой. Спавн по всему парку, чтобы игроки могли изучить локацию;
* {+} При спавне в Парке, все юниты спавна заносятся в группу **спавн_в_парке** и запускается триггер, который при каждой смерти **заражённого**, если он состоял в группе **спавн_в_парке**, удалял бы его оттуда;
* {+} При уничтожении всего спавна запускать, новый триггер подготовки атаки на Парк;

**Событие Атака в парке**:

* {+} Диалог с Командиром у входа в парк по рации, о том что часть заражённых прячется:
   * Джонни: Ну, что, съели уроды?;
   * Командир: Отлично стработано, парни! Но часть заражённых прячется!;
   * Командир: Добейте их, и подходите к западным воротам парка.;
* {-} По завершению диалога спавнятся волны заражённых, небольшими группами в нескольких случайных спавне из группы спавнов:
   * {-} спавны из палаток медиков;
   * {-} спавны из встающих трупов;
   * {-} спавны из леса;
* {-} Новая волна появляются если предыдущая уничтожена? Или если уничтожена половина предыдущей?;
* {+} Число волн зависит от числа игроков в группе;

**Событие Расчистка пути в БЗ**:

* {-} Группа подходит к западным воротам парка. Диалог с Командиром БЗ:
   * Джонни: Что-то мне не очень нравится куча этих обглоданых тел.;
   * Командир: Когда кордон пал, толпа заражённых успела вырваться из парка.;
   * Командир: Сейчас эти голодные твари стоят между вами и безопасной зоной.;
   * Командир: Это реально большая толпа ребята.;
   * Командир: Мне предётся закрыть выход из парка, а вам разобраться с ней. Удачи.;

* {-} Куча заражённых спавнится перед входом в БЗ; 
* {-} К этому моменту в БЗ не должно быть солдат;
* {-} Когда диалог заканчивается, восточный вход в парк закрывается (телепортировать всю группу в Парк или выживших?), открывается западный вход в парк. Со временем рушится проход на крыши лагеря выживших;
* {-} Спавнов может быть несколько. Число зависит от количества игроков в группе. Новый спавн появляется, когда кончается предыдущий;