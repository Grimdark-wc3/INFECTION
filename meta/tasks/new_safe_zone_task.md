# Задача по созданию локации Безопасная Зона

Нужно расписать какие работы должны быть выполнены, чтобы реализовать новую **Безопасную Зону**.

### Охрана БЗ
Все юниты кроме центральных охраняют позиции. Нужно чтобы охрана могла жить сама без героев. А бункер должен выкашивать толпы врагов, чтобы Боба не убили;

* Северные ворота:
   * {+} Гренадёр, Регулятор, два Священника;
* В центре:
   * {+} Священник (у Командира), ГО, Спецназовец, Гренадёр и Спецназовец (у костра);
* В переулке:
   * {+} Два Спецназовеца (у входа), Гренадёр (у входа), Священник (в коридоре), Два Спецназовца (в коридоре);
* В легере беженцев:
   * {-} Спецназовец, Священник;

### Лагерь беженцев и метро
Сделать компактней.

* {-} Ограды у леса;
* {-} Спуск в метро;
* {-} Горожан тоже создавать триггером;
* {-} Скорее всего дорогу в Брейдвиль придётся сдвинуть к западу, чтобы тоннель в метро уместился;

### Квест по убийству Зверя
Сделать интересней.

* {-} Переписать субтитры;

### Нападение на БЗ
Все нападающие юниты заносятся в соответствующую группу, которой отдаётся приказ атаковать БЗ. Численность группы регулярно проверяется (при смерти юнита);

* {+} Сценарий основных событий:
   * {+} Нападения происходят волнами на все ходы;
   * {+} В сломанные **Западные ворота** заезжает **заражённый БТР**;
   * {+} Из него вылезает отряд заражённых регуляторов (5-8, в зависимости от числа игроков в Survive);
   * {+} Дом на северо-востоке заменяется на дом заражённых;
   * {+} Дом на северо-востоке терят здоровье до 5%;
* {+} Сценарий нападения на другие ворота:
   * {+} Если игроков два, то нападают и на **Восточные ворота**:
      * {+} Группа спавна зависит от числа героев;
      * {+} **Священник** просит о помощи;
   * {+} Если игроков три, то нападают на все ворота:
      * {+} Группа спавна зависит от числа героев;
      * {+} **Регулятор** просит о помощи;
* {+} Когда все нападающие юниты уничтожены, отключить проверку их численности;

### Прорыв из БЗ
Нужно показать игрокам, что пора идти дальше.

* {-} Запускается когда **группа нападающих на БЗ** уничтожена;
* {-} Смена музыки;
* {-} Сценарий:
   * {-} Диалог с Бобом;
   * {-} Диалог с Командиром, если он жив;
   * {-} Звук реплики юнита прорыва (Ура!);
   * {+} При создании **юниты в переулке** должны объединяться в **отряд прорыва**;
   * {-} **Отряд прорыва** посылается  сначала к выходу из города, а потом оттуда через атаку в **Деревню Брейдвилль**;

### Осада БЗ
Периодически на БЗ нападают заражённые **со всех сторон**. Изображение, того что игрокам нужно торопиться.
Все осаждающие юниты заносятся в соответствующую группу, которой отдаётся приказ атаковать позицию Боба.

* {-} Запускается через 40 секунд, после того как **группа нападающих на БЗ** уничтожена;
* {-} Сценарий:
   * {-} Диалог с Бобом;
   * {-} Период нападений случаен;
   * {-} Запуск таймера обратного отсчёта;
   * {-} Переделать триггер **Battle 1**:
      * {-} Переименовать триггер;
      * {-} Сделать несколько разнообразных наборов спавнов и выбирать набор рандомно каждый раз для каждой стороны нападения;
      * {-} Каждого юнита спавна заносить в **группу нападающих на БЗ**;
      * {-} **Группе нападающих на БЗ** отдать приказ атаковать позицию Боба;

## todo
Набросок локации.

* {+} Создавать выживших БЗ динамично:
   * {+} записать точки в которых стоят статичные юниты БЗ (`/code/points/survivors_in_SZ.md`), затем удалить этих юнитов;
   * {+} создать новые типы юнитов: регулятор (снизить скорость?), орудийный расчёт, спецназовец, бункер;
   * {+} определить составы новых отрядов юнитов для охраны БЗ:
      * {+} регулятор, гренадер ГО, священник, спецназовец;
      * {+} регуляторы, священники;
      * {+} спецназовцы, гренадер, священник;
   * {+} написать триггер создающий юнитов БЗ в нужных точках и вызывать его при входе в ворота БЗ;
* {+} Переделать разговор с Бобом, разбить его триггер на несколько триггеров, переписать текст:
   * {+} Диалог с Бобом;
   * {+} Восклицательный знак над Бобом;
* {+} Создать событие **Нападение на БЗ**:
   * {+} Триггер управления музыкой и звуками нападающих и обороняющихся;
   * {+} Триггер управления спавнами нападения и последующих волн (сражения);
   * {>} Нужно давать игрокам понять, что нападение кончилось и нужно идти дальше:
      * {>} Диалог с Бобом? Новый отряд по защите БЗ? Запуск таймера до гибели БЗ?;
   * {>} Нападение на БЗ:
      * В сломанные ворота заезжает **заражённый БТР**;
      * Из него вылезает отряд заражённых регуляторов (5-8, в зависимости от числа игроков в Survive);
      * Дом на северо-востоке заменяется на дом заражённых;
      * Переделать другие спавны заражённых (разнообразить), выдавать их в цикле:
         * Пока идёт этот цикл закрыть проход к Бобу?;
         * Потом открыть и выпустить оттуда ещё солдат, а героям сказать, что пора идти дальше;
      * Переделать области спавнов Сражения **Осада БЗ**;
* {+} Создать декорации для западного входа в Безопасную зону;
* {>} Переделать лагерь беженцев и метро;