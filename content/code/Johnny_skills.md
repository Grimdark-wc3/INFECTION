# Способности Джонни

Алгоритмы реализации скиллов Джонни.

## Во всеоружии

Если Джонни попадает в область каста способности-наводчика **Во всеоружии**, то он применяет способность: **Удар прикладом**. Если в области каста только один юнит, то Джонни применяет **Выстрел из подствольника**. Если много, то уже на выбор: **Молотов**, **Граната**, **Мина**;

### Реализация

* **Событие**: юнит приводит способность в действие;
* **Условие**: способность = **Во всеоружии**;
* **Действия**:
   * Проверка уровня прокачки способности:
      * Расстояние от Джонни до центра области применения способности меньше чем радиус этой области, то:
         * Создаётся дамми юнит рядом с Джонни, ему даётся способность **Удар прикладом**, которую дамми и закастовывает, а затем уничтожается;
      * В области применения способности число юнитов < 7:
         * Создаётся дамми юнит рядом с Джонни, ему даётся способность **Выстрел из подствольника**, которую дамми и закастовывает в туже точку куда и оригинал, а затем уничтожается;
      * Иначе:
         * Создаётся дамми юнит рядом с Джонни, ему даётся способность **Молотов**/**Граната**/**Мина**, которую дамми и закастовывает в туже точку куда и оригинал, а затем уничтожается;

### Удар прикладом
*Основа* ***Фан ножей***.

* **Событие**: юнит приводит способность в действие;
* **Условие**: способность = **Удар прикладом**;
* **Действия**:
   * Цикл по группе юнитов, присутствующих на карте:
      * Проверка: Если дистанция между юнитом группы и кастером меньше 100, то:
         * Занести их в группу *Попавшие под удар приклада*;
   * В цикле I от 1 до 7 (см. триггер способности **CastWarmDigg**):
      * В цикле II по группе юнитов *Попавшие под удар приклада*:
         * Двигать юнита группы от юнита кастера на 10 прочь от юнита кастера;
      * Ждать 0.25 секунды при этом заносить юнита кастера и счётчик цикла I в локальные переменные;

## Глаз алмаз
*Про выбор между эмпатией и множественным выстрелом*. Но идея дамми юнитов копий Джонни, создаваемых для союзника остаётся в силе, просто нужно выбрать как её применять.

Нужен дамми юнит, копия Джонни, но без файла модели и с **москитами**, и который принимает копии предметов оригинального Джонни-кастера.

Создаётся группа юнитов *Помеченные рикошетом*. Она перебирается в цикле. Рядом с каждым юнитом группы создаётся клон Джонни с его уровнем и предметами и атакует его один раз. В отдельном триггере этот атакующий юнит (дамми-Джонни) удаляется после первой атаки.